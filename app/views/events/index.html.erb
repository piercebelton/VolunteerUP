<nav class="breadcrumb">
  <a class="breadcrumb-item" href="/">Home</a>
  <span class="breadcrumb-item active"> > Events</span>
</nav>

<div class="row">
  <p id="notice"><%= notice %></p>
</div>

<div class="row">
  <div class="col-md-8">
    <h1 class= "vertical-align">Events</h1>
  </div>

  <div class="col-md-4 text-right" id="search-bar">
    <%= form_tag(events_path, method: 'get', id: 'search-form') do %>
    <span class="vertical-align" id = "search_box"> <%= text_field_tag :search, params[:search], placeholder: "Search" %> </span>
    <span id = "search_button"><%= submit_tag "Search All", name: nil %></span>
    <% end %>
  </div>
</div>
<br>


<table class="table table-hover">
  <thead>
    <tr>
      <th>Event</th>
      <th>Cause</th>
      <th>Organization</th>
      <th>Date and Time</th>
      <th>Event Location</th>
      <th>Volunteers Needed</th>
      <!-- <th colspan="3"></th> -->
    </tr>
  </thead>
  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td>
          <%= link_to event.name, event %><br><br>
          <!-- <%= event.description %><br><br> -->
        </td>
        <td><%= event.cause %></td>
        <td><%= link_to event.organization.name, organization_path(event.organization) %></td>
        <td>
          <%= event.start_time.strftime("%b %e, %Y")%><br>
          <%= event.start_time.strftime("%l:%M %p") %> -
          <%= event.end_time.strftime("%l:%M %p") %><br>
          (<%= ((event.end_time-event.start_time)/3600).round(1)  %> hours)
        </td>
        <td>
          <%= event.street %><br>
          <%= event.city %>,
          <%= event.state %>
          <%= event.postal_code %>
          <%= event.country %>
        </td>
        <td><%= "#{event.remaining_vol} needed / " %>
        <%= "#{event.volunteers_needed} total" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if @ability.can? :new, Event %>
  <%= link_to 'New Event', new_event_path, class: "btn btn-sm btn-primary" %>
<% end %>


<div id="events_map" class="center-block" data-events-id="<%=@events%>"></div>

<!-- <script>
    markers = handler.addMarkers(<%=raw @hash.to_json %>);
</script> -->
